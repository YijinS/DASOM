<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="faq">
	<resultMap type="com.dasomcompany.dto.FaqDto" id="FaqDto">
		<result property="num" column="ID" />
		<result property="question" column="QUESTION" />
		<result property="answer" column="ANSWER" />
	</resultMap>
	
	<!-- getcount -->
	<select id="getCount" parameterType="com.dasomcompany.dto.FaqDto" resultType="int">
		SELECT NVL(MAX(ROWNUM), 0) FROM FAQ
		<choose>
			<when test="question != null and question != ''">
				WHERE QUESTION LIKE '%${question}%'
			</when>
			<when test="answer != null and answer != '' ">
				WHERE ANSWER LIKE '%${answer}%'
			</when>
		</choose>
	</select>

	<!-- 견적문의 전체목록 -->
	<select id="getList" resultMap="FaqDto" parameterType="com.dasomcompany.dto.FaqDto">
		SELECT * FROM
		(SELECT result1.*, ROWNUM AS rnum 
		FROM
		(SELECT NUM, QUESTION, ANSWER
		FROM FAQ
		<choose>
			<when test="question != null and question != '' ">
				WHERE QUESTION LIKE '%${question}%'
			</when>
			<when test="answer != null and answer != '' ">
				WHERE ANSWER LIKE '%${answer}%'
			</when>
		</choose>
		ORDER BY NUM DESC) result1)
		WHERE rnum BETWEEN #{startRowNum} AND #{endRowNum}
	</select>


</mapper>